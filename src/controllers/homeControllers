const express = require("express");
const {getAllUser} = require("../service/CRUDservices")

// nơi xử lí logic
const connection = require("../config/database");
const handleGetHomePage = async(req, res) => {
  let results =  await getAllUser()
  return res.render("home.ejs",{listUser:results});
};
const handleGetAbc = (req, res) => {
  res.send("my name is phuoc ");
};
const postCreateUser = async (req, res) => {
  let { email, createName, city } = req.body;
  console.log(email, createName, city);
  let [results, fields] = await connection.query(
    `insert into users (email,name, city) values (?, ?, ?);`,
    [email, createName, city]
  );
  console.log(results)
  res.send("create new user")
};
const getCreateHome = (req, res) => {
  res.render("create.ejs");
};
const getEdit= (req,res)=>{
  res.render("edit.ejs")
}
//express.json() convert các kiểu dữ liệu của bạn sang kiểu json object của javascript
// đọc trên express.json()
module.exports = { handleGetHomePage, handleGetAbc, postCreateUser, getCreateHome, getEdit };
